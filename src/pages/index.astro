---
import config from "@/config/config.json";
import social from "@/config/social.json";
import Base from "@/layouts/Base.astro";
import Pagination from "@/layouts/components/Pagination.astro";
import Posts from "@/layouts/Posts.astro";
import { getSinglePage } from "@/lib/contentParser.astro";
import { sortByDate } from "@/lib/utils/sortFunctions";

const posts = await getSinglePage("posts");
const sortedPosts = sortByDate(posts);
const totalPages = Math.ceil(posts.length / config.settings.pagination);
const currentPosts = sortedPosts.slice(0, config.settings.pagination);
// 画像・テキスト・SNSリンクはここで変更できます
const profileImage = "/images/author.png"; // public/images/author.png など自由に変更
const name = "shiragi";
const description = "CTF / セキュリティ / ネットワークインフラに興味がある人";

// social.jsonから空でないSNSのみ抽出し、FontAwesomeアイコン名に変換
const iconMap: Record<string, string> = {
  twitter: "twitter",
  github: "github",
  gitlab: "gitlab",
  facebook: "facebook",
  linkedin: "linkedin",
  youtube: "youtube",
  medium: "medium",
  codepen: "codepen",
  bitbucket: "bitbucket",
  dribbble: "dribbble",
  behance: "behance",
  pinterest: "pinterest",
  soundcloud: "soundcloud",
  tumblr: "tumblr",
  reddit: "reddit",
  vk: "vk",
  whatsapp: "whatsapp",
  snapchat: "snapchat",
  vimeo: "vimeo",
  tiktok: "tiktok",
  foursquare: "foursquare",
  rss: "rss",
  email: "envelope",
  phone: "phone",
  address: "map-marker-alt",
  skype: "skype",
  website: "globe",
};

const socialLinks = Object.entries(social)
  .filter(([key, value]) => value)
  .map(([key, value]) => ({ icon: iconMap[key], url: value }));
---

<!-- <html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{name} | Portfolio</title>
    <style>
      body {
        background: #fff;
        color: #222;
        min-height: 100vh;
        margin: 0;
        font-family: 'Inter', 'Helvetica Neue', Arial, sans-serif;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .center {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 80vh;
      }
      .profile-img {
        width: 160px;
        height: 160px;
        border-radius: 50%;
        object-fit: cover;
        box-shadow: 0 4px 24px rgba(0,0,0,0.08);
        margin-bottom: 2rem;
        background: #f5f5f5;
      }
      .name {
        font-size: 2rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
        color: #222;
        text-align: center;
      }
      .desc {
        font-size: 1.2rem;
        color: #555;
        margin-bottom: 2rem;
        text-align: center;
      }
      .social {
        display: flex;
        gap: 2rem;
        margin-top: 1rem;
      }
      .social a {
        color: #222;
        font-size: 2rem;
        transition: color 0.2s;
      }
      .social a:hover {
        color: #0070f3;
      }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
  </head> -->
<Base>
  <main class="flex flex-col items-center justify-center min-h-[80vh]">
    <img
      src={profileImage}
      alt="Profile"
      class="w-40 h-40 rounded-full object-cover shadow-lg mb-8 bg-gray-100"
    />
    <div class="text-2xl font-semibold mb-2 text-gray-900 text-center">
      {name}
    </div>
    <div class="text-lg text-gray-600 mb-8 text-center">{description}</div>
    <div class="flex gap-8 mt-4">
      {
        socialLinks.map((link) => (
          <a
            href={link.url}
            target="_blank"
            rel="noopener"
            aria-label={link.icon}
            class="text-gray-900 text-2xl transition-colors duration-200 hover:text-blue-500"
          >
            <i class={`fab fa-${link.icon}`} />
          </a>
        ))
      }
    </div>
  </main>
</Base>
